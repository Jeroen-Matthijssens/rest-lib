apply from: 'general.gradle'
apply from: 'integration.gradle'

group = 'org.tutske'

dependencies {
	compile (
		[ group: 'com.google.code.gson', name: 'gson', version: '2.6.2' ],
		[ group: 'org.eclipse.jetty', name: 'jetty-runner', version: '9.3.9.M0' ],
		[ group: 'org.tutske.utils', name: 'options', version: 'b.1.2' ],
		[ group: 'org.slf4j', name: 'slf4j-api', version: '1.7.21' ]
	)
	testCompile (
		[ group: 'junit', name: 'junit', version: '4.12'],
		[ group: 'org.hamcrest', name: 'hamcrest-all', version: '1.3' ]
	)
	integrationCompile (
		[ group: 'it.tutske', name: 'it-utils', version: 'a.1.2' ],
		[ group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.5' ],
		[ group: 'org.apache.logging.log4j', name: 'log4j-slf4j-impl', version: '2.5' ]
	)
}

jar {
	manifest {
		attributes (
			'Main-Class': 'org.tutske.main.Main',
			'Class-Path': configurations.compile.collect ({ it.getName () }).join (' ')
		)
	}
}

itJar {
	manifest {
		attributes (
			'Main-Class': 'it.tutske.IntegrationMain',
			'Class-Path': ([jar.archivePath] + configurations.integrationRuntime)
				.collect ({ it.getName () })
				.join (' ')
		)
	}
}
